<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}" media="screen" type="text/css">
    <link rel="stylesheet" href="{{ '/assets/css/print.css' | relative_url }}" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

{% seo %}

    {% include head-custom.html %}

    <script>
      fetch('packages.json')
        .then(response => response.json())
        .then(data => {
          const selector = document.getElementById('packageSelector');
          data.forEach(pkg => {
            const option = document.createElement('option');
            option.value = pkg.name; // Use the package name as the value
            option.textContent = pkg.name; // Also use the name as the text content
            selector.appendChild(option);
          });
        })
        .catch(error => console.error('Failed to load packages:', error));

fetch('extensions.json')  // 
  .then(response => response.json())
  .then(data => {
    const selector = document.getElementById('extensionSelector');
    data.forEach(ext => {
      const option = document.createElement('option');
      option.value = ext;
      option.textContent = ext;
      selector.appendChild(option);
    });
  })
  .catch(error => console.error('Failed to load extensions:', error));

function generateDevContainerJSON() {
  const image = document.getElementById('packageSelector').value;
  const cpus = document.getElementById('cpuSelector').value;
  const extensions = Array.from(document.getElementById('extensionSelector').selectedOptions).map(opt => opt.value);
  const ports = document.getElementById('ports').value.split(',');

  const devContainerConfig = {
    "image": image,
    "hostRequirements": {
      "cpus": parseInt(cpus)
    },
    "customizations": {
      "vscode": {
        "extensions": extensions
      }
    },
    // Add additional customizations based on ports or other inputs
  };

  // Output the JSON configuration in a formatted way
  document.getElementById('output').textContent = JSON.stringify(devContainerConfig, null, 2);
}

    </script>
  </head>

  <body>
    <header>
      <div class="inner">
        <a href="{{ '/' | absolute_url }}">
          <h1>{{ site.title | default: site.github.repository_name }}</h1>
        </a>
        <h2>{{ site.description | default: site.github.project_tagline }}</h2>
        {% if site.github.is_project_page %}
          <a href="{{ site.github.repository_url }}" class="button"><small>View project on</small> GitHub</a>
        {% endif %}
        {% if site.github.is_user_page %}
          <a href="{{ site.github.owner_url }}" class="button"><small>Follow me on</small> GitHub</a>
        {% endif %}
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
        <select id="packageSelector"></select>
          
<!-- CPU Selector -->
<label for="cpuSelector">CPUs:</label>
<input type="number" id="cpuSelector" name="cpus" min="1" max="8" value="2">
<br>
        
<!-- Ports -->
<label for="ports">Enter Ports:</label>
<input type="text" id="ports" name="ports" placeholder="Enter ports separated by commas e.g., 8080, 3000">
<br>
<!-- VS Code Extensions -->
<label for="extensionSelector">Select VS Code Extensions:</label>
<select id="extensionSelector" multiple>
  <!-- Options will be populated dynamically -->
</select>
<br>
<!-- Generate Button -->
<button onclick="generateDevContainerJSON()">Generate devcontainer.json</button>
<br>
<!-- Output -->
<pre id="output"></pre>


       {{ content }}
        </section>
        <aside id="sidebar">
          {% if site.show_downloads %}
            <a href="{{ site.github.zip_url }}" class="button">
              <small>Download</small>
              .zip file
            </a>
            <a href="{{ site.github.tar_url }}" class="button">
              <small>Download</small>
              .tar.gz file
            </a>
          {% endif %}

          {% if site.github.is_project_page %}
            <p class="repo-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</p>
          {% endif %}

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</p>
        </aside>
      </div>
    </div>

  </body>
</html>
